---
trigger: always_on
---

Процесс разработки можно разделить на два четких этапа: 
**1. Разработка и отладка**
**2. Создание патча**.


1.  **Внесите изменения:** Откройте папку `vscode/` в другом редакторе (или даже в собранном вами Researcherry) и пишите код. Например, измените `src/vs/workbench/browser/workbench.ts`.

2.  **Запустите быструю пересборку:** Вам не нужно запускать весь `dev/build.sh`. Вместо этого, выполните только команды компиляции. Это в разы быстрее.

    ```bash
    # Перейдите в папку с кодом
    cd vscode

    # Запустите только компиляцию (это самая быстрая команда для проверки)
    npm run gulp compile-build-without-mangling

    # Если компиляция прошла успешно, запустите сборку для вашей платформы
    # Например, для macOS:
    npm run gulp "vscode-darwin-arm64-min-ci"

    # Вернитесь в корневую папку
    cd ..
    ```

3.  **Проверьте результат:** Запустите приложение из папки `VSCode-darwin-arm64/`. Ваши изменения должны быть видны.

4.  **Повторяйте:** Если что-то не так, возвращайтесь к шагу 1. Вносите правки, снова запускайте быструю пересборку и проверяйте.

**Ключевая идея:** На этом этапе вы работаете с папкой `vscode/` как с обычным проектом. Папка `.git` в корне проекта полностью игнорирует ваши изменения в `vscode/` (это прописано в `.gitignore`), так что вы можете экспериментировать, не боясь что-то сломать в основной истории коммитов.

-----

### Этап 3: Создание патча (делается один раз в конце)

Когда вы полностью уверены, что ваш код работает идеально и готов к тому, чтобы стать частью проекта, вы "упаковываете" все свои изменения в патч.

1.  **Убедитесь, что все работает:** Финальный раз соберите и протестируйте приложение.

2.  **Используйте скрипт для создания патчей:** Ваш проект уже содержит для этого удобные инструменты.

      * **Если вы создаете новую функциональность (новый патч):**
        ```bash
        ./dev/patch.sh your-new-feature-name.patch
        ```
      * **Если вы обновляете существующий патч:**
        ```bash
        # Запустите скрипт обновления
        ./dev/update_patches.sh
        # Он сам найдет измененные файлы и предложит обновить нужный патч
        ```

3.  **Следуйте инструкциям скрипта:** Скрипт сам найдет все отличия между "чистым" кодом VSCodium и вашими изменениями в папке `vscode/` и аккуратно сложит их в один `.patch` файл.

Таким образом, вы отделяете творческий процесс разработки и отладки от формального процесса фиксации изменений в виде патча. Это безопасно, эффективно и является стандартом для работы с такими проектами.