# Объяснение патчей Researcherry

Этот документ описывает назначение каждого патча, используемого в проекте Researcherry.

### `binary-name.patch`

**Назначение:** Этот патч изменяет жестко закодированное имя исполняемого файла `code` на динамическое значение, получаемое из `product.applicationName`. Это позволяет использовать имя приложения, определенное в переменных брендинга (например, `researcherry`), вместо стандартного `code`.

### `brand.patch`

**Назначение:** Этот патч выполняет ребрендинг приложения, заменяя все упоминания "VS Code" на плейсхолдер `!!APP_NAME!!` в различных файлах исходного кода. Это включает текстовые элементы пользовательского интерфейса, описания расширений, сообщения и подсказки, обеспечивая единообразный брендинг "Researcherry" после сборки.

### `chat.patch`

**Назначение:** Этот патч изменяет значение по умолчанию для настройки `chat.commandCenter.enabled` с `true` на `false`. Вероятно, это сделано для отключения или изменения поведения встроенного чата/Copilot по умолчанию, что соответствует фокусу Researcherry на "human-in-the-loop" AI-агентах.

### `cli.patch`

**Назначение:** Этот патч вносит существенные изменения в работу командной строки (CLI) приложения, особенно в части, касающейся обновления и загрузки компонентов. Он направлен на улучшение брендинга и гибкости CLI, а также на рефакторинг механизма обновления и загрузки.

*   **Брендинг и конфигурация:** Вводятся новые переменные окружения (`VSCODE_CLI_DOWNLOAD_ENDPOINT`, `VSCODE_CLI_APP_NAME`, `VSCODE_CLI_BINARY_NAME`), которые позволяют CLI использовать кастомные имена приложения, бинарные имена и URL-адреса для загрузки.
*   **Механизм обновления и загрузки:** Изменяется логика формирования URL-адресов для загрузки обновлений, делая ее более динамичной и зависящей от новых переменных брендинга. Также происходит рефакторинг функций, определяющих платформу и архитектуру, для более чистого и гибкого использования.
*   **Улучшение надежности:** Некоторые изменения, такие как использование `unwrap()` и возвращение `Result` для `server_entrypoint`, указывают на адаптацию к новой структуре данных и, возможно, на изменения в обработке ошибок.

### `disable-cloud.patch`

**Назначение:** Этот патч отключает функциональность, связанную с облачными изменениями (Cloud Changes) и синхронизацией сессий редактирования. Он удаляет регистрацию действия "Turn on Cloud Changes..." и связанных с ним меню. Вероятно, это сделано для полного отключения интеграции с облачными сервисами Microsoft, такими как синхронизация настроек и расширений через облако, что соответствует цели Researcherry быть полностью автономным и не зависящим от внешних сервисов Microsoft.

### `disable-localization.patch`

**Назначение:** Этот патч изменяет процесс сборки, позволяя ему продолжаться, даже если директория с файлами локализации (`vscode-loc/i18n`) отсутствует. В таком случае, он создает пустые файлы `nls.messages.<language_id>.js`, чтобы избежать ошибок сборки. Это предназначено для отключения зависимости от внешних ресурсов локализации, что может быть полезно для проектов, которые не используют или управляют своей локализацией иным способом.

### `disable-signature-verification.patch`

**Назначение:** Этот патч отключает проверку подписи расширений. Он устанавливает значение `verifySignature` в `false` в `ExtensionManagementService`, что фактически пропускает этот этап при установке или обновлении расширений. Это, вероятно, используется для упрощения установки расширений, особенно тех, которые не подписаны Microsoft или получены из неофициальных источников, что важно для форков, таких как Researcherry.

### `ext-from-gh.patch`

**Назначение:** Этот патч изменяет логику загрузки встроенных расширений, удаляя возможность их загрузки из официального Marketplace (через `productjson.extensionsGallery?.serviceUrl`). Это означает, что встроенные расширения теперь должны поставляться из других источников, например, напрямую из GitHub (как следует из названия патча). Это типичное изменение для форков VSCodium, позволяющее избежать зависимости от Microsoft Marketplace и использовать альтернативные методы распространения расширений.

### `extensions-disable-mangler.patch`

**Назначение:** Этот патч отключает "манглинг" (сокращение имен переменных и функций) для расширений, принудительно возвращая исходный код без изменений. Это может быть полезно для отладки, так как имена функций и переменных остаются читаемыми, или для обхода проблем совместимости с некоторыми расширениями, которые могут некорректно работать после манглинга.

### `feat-announcements.patch`

**Назначение:** Этот патч добавляет новую функциональность на страницу приветствия (Getting Started Page) — отображение объявлений. Он вводит новую конфигурационную опцию `workbench.welcomePage.extraAnnouncements`, которая позволяет загружать дополнительные объявления из репозитория `!!APP_NAME!!` (Researcherry). Это значительно улучшает коммуникацию с пользователями, предоставляя централизованное место для информации о проекте.

### `feat-ext-unsafe.patch`

**Назначение:** Этот патч добавляет новую конфигурационную опцию `extensions.excludeUnsafes`, которая по умолчанию включена. Эта опция контролирует, будет ли приложение загружать и кэшировать списки вредоносных и устаревших расширений. Отключение этой опции может быть полезно для гибкости (использование собственного репозитория), приватности (уменьшение сетевых запросов) или упрощения, если проект не полагается на эти списки.

### `fix-electron-esm.patch.bak`

**Назначение:** Этот патч (возможно, резервная копия или неактивный) изменяет способ импорта модуля `@electron/get` в `node_modules/@vscode/gulp-electron/src/download.js` с `require` на динамический `import()`. Это, вероятно, решает проблемы совместимости с модулями ES (ESM) в Electron или в среде сборки, обеспечивая корректную асинхронную загрузку `downloadArtifact`, что критично для процесса сборки.

### `fix-eol-banner.patch`

**Назначение:** Этот патч добавляет функциональность "больше не показывать" (neverShowAgain) для баннеров в приложении. Он расширяет интерфейс `IBannerItem` новым свойством `neverShowAgain` и реализует логику сохранения этого предпочтения пользователя в хранилище. Это улучшает пользовательский опыт, предотвращая повторное появление навязчивых или уже прочитанных сообщений, что особенно полезно для уведомлений об окончании поддержки (End-of-Life) или других одноразовых объявлений.

### `fix-remote-libs.patch`

**Назначение:** Этот патч добавляет зависимость `tslib` в `remote/package.json` и `remote/package-lock.json`. `tslib` — это небольшая вспомогательная библиотека для TypeScript, которая содержит общие функции, используемые компилятором TypeScript. Это изменение, вероятно, необходимо для корректной работы удаленных компонентов или сервисов, которые используют TypeScript и были скомпилированы с включенными опциями, требующими `tslib`, гарантируя доступность всех необходимых вспомогательных функций во время выполнения.

### `force-russian-locale.patch`

**Назначение:** Этот патч пуст и не вносит никаких изменений в код. Возможно, это заглушка или патч, который планировался, но так и не был реализован.

### `merge-user-product.patch`

**Назначение:** Этот патч добавляет функциональность, позволяющую пользователям переопределять конфигурацию `product.json` приложения. Он загружает дополнительный `product.json` из директории пользовательских данных и объединяет его с основной конфигурацией. Это дает возможность настраивать брендинг, галереи расширений, URL-адреса обновлений и другие параметры, обеспечивая высокую степень кастомизации для пользователей Researcherry.

### `optional-tree-sitter.patch`

**Назначение:** Этот патч изменяет способ включения зависимости `tree-sitter`, перемещая ее в `optionalDependencies`. Это делает установку `tree-sitter` необязательной, что позволяет уменьшить размер сборки, улучшить совместимость в определенных средах и обеспечить гибкость развертывания для пользователей, которым не нужна полная функциональность синтаксического анализа.

### `policies.patch`

**Назначение:** Этот патч ребрендирует и кастомизирует систему управления политиками. Он заменяет `@vscode/policy-watcher` на `@vscodium/policy-watcher` и изменяет пути политик, чтобы они использовали плейсхолдер `!!ORG_NAME!!` вместо `Microsoft`. Это позволяет Researcherry иметь собственную, независимую и брендированную систему политик.

### `profiles-feature.patch`

**Назначение:** Этот патч добавляет новую функциональность, связанную с профилями пользователей, специально для Researcherry. Он вводит команды для переключения между профилями "Исследователь" и "Разработчик", а также реализует автоматическую установку профиля "Исследователь" по умолчанию при первом запуске приложения для нового пользователя. Патч также интегрирует новый функционал с системой интернационализации.

### `profiles.patch`

**Назначение:** Этот патч содержит те же изменения, что и `profiles-feature.patch`, и реализует функциональность профилей пользователей "Исследователь" и "Разработчик", включая автоматическую установку профиля по умолчанию и интеграцию с системой интернационализации. По сути, это дубликат `profiles-feature.patch`.

### `remove-mangle.patch`

**Назначение:** Этот патч удаляет шаг "манглинга" (обфускации/минификации) из процесса компиляции. Это улучшает отлаживаемость кода, предотвращает потенциальные проблемы совместимости и упрощает процесс сборки, делая код более читаемым и удобным для разработки.

### `remove-russian-language-pack.patch`

**Назначение:** Этот патч удаляет запись о русском языковом пакете `ms-ceintl.vscode-language-pack-ru` из файла `product.json`. Это позволяет Researcherry управлять собственной локализацией и не зависеть от официального языкового пакета Microsoft, что является частью стратегии ребрендинга и кастомизации.

### `report-issue.patch`

**Назначение:** Этот патч полностью ребрендирует и перенаправляет функциональность сообщения о проблемах. Он заменяет все упоминания "VS Code" на `!!APP_NAME!!`, перенаправляет поиск дубликатов проблем и ссылки на документацию в GitHub-репозиторий Researcherry (`!!GH_REPO_PATH!!`), а также удаляет зависимость от проприетарного сервиса Microsoft для поиска дубликатов. Это обеспечивает независимость и направляет пользователей в собственные каналы поддержки Researcherry.

### `researcherry-welcome-page.patch`

**Назначение:** Этот патч кардинально перерабатывает страницу приветствия (Welcome Page), делая ее специфичной для Researcherry. Он упрощает начальные действия, полностью ребрендирует и фокусирует страницу на ResearcherryAI, добавляя новое содержание, описывающее платформу, ее работу, результаты и уникальные преимущества. Также удаляются веб-специфичные настройки. Это ключевой патч для брендинга и позиционирования продукта.

### `add-russian-pack.patch` и `force-russian-locale.patch`

**Назначение:** Оба эти патча являются пустыми и не вносят никаких изменений в кодовую базу. Вероятно, они были созданы как заготовки или их функциональность была перенесена в другие патчи. Они не оказывают влияния на текущую работу приложения.

### `binary-name.patch`

**Назначение:** Этот патч изменяет способ формирования имени исполняемого файла приложения. Он заменяет жестко закодированное имя бинарного файла (например, `code`) на динамическое значение, получаемое из `product.applicationName` или `this.productService.applicationName`. Это обеспечивает, что имя исполняемого файла и связанные с ним пути (например, для символических ссылок в `/usr/local/bin`) соответствуют имени приложения, указанному в конфигурации продукта (например, "researcherry"). Это фундаментальное изменение для полного ребрендинга, так как оно гарантирует, что все системные ссылки и исполняемые файлы используют новое имя Researcherry.

### `brand.patch`

**Назначение:** Этот патч является одним из самых обширных и критически важных для полного ребрендинга Researcherry. Он систематически заменяет все упоминания "VS Code" и связанные с ним брендовые элементы на плейсхолдер `!!APP_NAME!!` (который затем будет заменен на "Researcherry") по всей кодовой базе. Это включает глобальный ребрендинг UI-строк в описаниях расширений, подсказках, сообщениях об ошибках, настройках и других элементах пользовательского интерфейса. Он также контекстуализирует ссылки, изменяя текст, окружающий их, чтобы ссылаться на `!!APP_NAME!!`, поддерживая общую брендовую консистентность. Этот патч фундаментален для создания ощущения, что пользователь работает с Researcherry, а не с VSCodium или VS Code, обеспечивая глубокую интеграцию нового бренда на уровне кода и интерфейса.

### `chat.patch`

**Назначение:** Этот патч изменяет значение по умолчанию для настройки `chat.commandCenter.enabled` с `true` на `false`. Это означает, что функция "Command Center" для чата будет отключена по умолчанию в Researcherry, что соответствует цели Researcherry как специализированной платформы AI-агентов для исследования клиентов и помогает избежать активации ненужных или нерелевантных функций.

### `skip-language-packs.patch`

**Назначение:** Этот патч добавляет логику для пропуска языковых пакетов Microsoft (начинающихся с `ms-ceintl.vscode-language-pack-`) во время фазы `marketplace` синхронизации встроенных расширений. Это предотвращает загрузку и обработку этих пакетов, что помогает избежать потенциальных ошибок сборки и позволяет Researcherry полностью контролировать свою локализацию, не завися от официальных языковых пакетов VSCodium/VS Code.

### `terminal-suggest.patch`

**Назначение:** Этот патч добавляет поддержку автодополнения команд для Researcherry в терминале. Он интегрирует бинарные имена Researcherry (`!!BINARY_NAME!!` и `!!BINARY_NAME!!-insiders`) в систему автодополнения команд терминала, создавая новые файлы спецификаций и добавляя их в список доступных. Это позволяет пользователям получать корректные подсказки и автодополнение при вводе команд, связанных с Researcherry, в интегрированном терминале.

### `update-cache-path.patch`

**Назначение:** Этот патч изменяет путь к кэшу обновлений в Windows. Он модифицирует функцию `cachePath` в `updateService.win32.ts`, чтобы использовать `this.productService.applicationName` вместо жестко закодированного `vscode-` при формировании пути к временному кэшу обновлений. Это гарантирует, что кэш обновлений будет храниться в директории, соответствующей имени приложения Researcherry (например, `researcherry-` вместо `vscode-`), что важно для правильной работы обновлений и изоляции данных в ребрендированном приложении.

### `update-electron.patch.no`

**Назначение:** Этот патч обновляет версию Electron с `34.5.1` до `34.5.4` в файлах `.npmrc`, `cgmanifest.json`, `package-lock.json` и `package.json`. Он также обновляет все контрольные суммы (хеши SHA256) для различных компонентов Electron (chromedriver, electron-api, ffmpeg, hunspell, libcxx, mksnapshot) в файле `build/checksums/electron.txt`. Это критически важно для обеспечения совместимости, стабильности и безопасности приложения, так как Electron является основной платформой, на которой построен Researcherry. Обновление до более новой версии Electron может включать исправления ошибок, улучшения производительности и новые функции.

### `update-russian-language-pack.patch`

**Назначение:** Этот патч изменяет версию русского языкового пакета `ms-ceintl.vscode-language-pack-ru` в файле `product.json` с `1.90.0` на `1.99.0`. Это гарантирует, что Researcherry будет использовать самую актуальную версию русского языкового пакета, предоставляя пользователям наиболее свежий и полный перевод интерфейса.

### `use-github-pat.patch`

**Назначение:** Этот патч изменяет поведение встроенной аутентификации GitHub. Он отключает стандартную проверку поддерживаемых клиентов и хостинга GitHub Enterprise в расширении `github-authentication`, заставляя функции `isSupportedClient` и `isHostedGitHubEnterprise` всегда возвращать `false`. Это, вероятно, сделано для того, чтобы принудительно использовать Personal Access Tokens (PAT) или другие, более контролируемые методы аутентификации GitHub, вместо встроенных механизмов, которые могут быть несовместимы с политиками Researcherry или его спецификой как форка. Это обеспечивает большую гибкость и безопасность в управлении доступом к GitHub-ресурсам.

### `version-0-release.patch`

**Назначение:** Этот патч стандартизирует и упрощает управление версиями как в процессе сборки, так и в API. Он удаляет динамический `linuxPackageRevision` и сокращает версию для snap-пакетов до `packageJson.version`, обеспечивая более чистый номер версии для пакетов `.deb`, `.rpm` и `snap`. Кроме того, он обрезает версию, предоставляемую расширениям (`vscode.version`), оставляя только основные три компонента, что критически важно для совместимости и стабильности API, независимо от типа сборки.

### `version-1-update.patch`

**Назначение:** Этот патч значительно перерабатывает систему обновлений Researcherry. Он расширяет типы обновлений, добавляя `WindowsInstaller`, вводит новые типы для метаданных обновления (`Architecture`, `Platform`, `Quality`, `Target`), универсализирует функцию `createUpdateURL` для динамического формирования URL обновлений, улучшает логику проверки версий с использованием `semver` и добавляет специфическую обработку MSI-установщиков для Windows. В целом, патч направлен на создание более надежной, универсальной и управляемой системы обновлений.

### `welcome-page-russian.patch`

**Назначение:** Этот патч переводит различные строки и описания на странице приветствия и в разделе "Начало работы" на русский язык. Он включает перевод заголовков, описаний для создания нового файла, открытия файлов/папок, а также элементов, связанных с настройкой редактора, выбором темы и работой с расширениями. Это улучшает пользовательский опыт для русскоязычных пользователей, делая интерфейс более интуитивно понятным и доступным.

### `add-russian-pack.patch`

**Назначение:** Этот патч не содержит никаких изменений, так как является пустым файлом. Вероятно, он был создан как заготовка или плейсхолдер, но не был использован для внесения каких-либо модификаций в проект.

### `binary-name.patch`

**Назначение:** Этот патч обеспечивает использование динамического имени исполняемого файла и связанных с ним путей на основе имени приложения Researcherry. Он заменяет жестко закодированное имя исполняемого файла "code" на динамическое `product.applicationName` (которое для Researcherry будет "researcherry") в скрипте сборки и службе нативного хоста. Это критически важно для полного ребрендинга, так как гарантирует, что все системные ссылки и исполняемые файлы будут соответствовать новому имени приложения Researcherry.

### `cli.patch`

**Назначение:** Этот патч значительно перерабатывает механизмы обновления и обслуживания сервера в CLI. Он вводит новые переменные окружения для конфигурирования эндпоинтов обновления, имени приложения и имени бинарника. Также он упрощает определение платформы и архитектуры, заменяя специфичные методы на более общие `arch()` и `os()`. Логика получения последних коммитов и потоков загрузки была рефакторингована для использования этих новых конфигурируемых значений и более структурированного формата URL для загрузки релизов сервера. Это делает CLI более гибким и адаптируемым для различных форков и обеспечивает более надежный процесс обновлений и запуска сервера.

### `disable-cloud.patch`

**Назначение:** Этот патч отключает функциональность синхронизации облачных изменений (Edit Sessions) в Researcherry. Он удаляет код, отвечающий за регистрацию действия входа в систему для облачных изменений, а также связанные с этим элементы пользовательского интерфейса и контекстные ключи. Это изменение соответствует цели Researcherry быть самостоятельной платформой для AI-агентов, не зависящей от внешних облачных сервисов синхронизации, предоставляемых VSCodium/VS Code.

### `disable-localization.patch`

**Назначение:** Этот патч изменяет процесс сборки, чтобы предотвратить ошибки, связанные с отсутствием файлов локализации. Он модифицирует скрипт `build/lib/i18n.js` так, что если директория `vscode-loc/i18n` (содержащая переводы) не найдена, вместо ошибки создаются пустые файлы `nls.messages.<language_id>.js` для каждого языка. Это гарантирует, что процесс сборки не прервется, даже если полный репозиторий переводов VSCodium не клонирован, что полезно для Researcherry, позволяя собирать проект без полной зависимости от всех компонентов VSCodium.

### `disable-signature-verification.patch`

**Назначение:** Этот патч отключает проверку подписи расширений в Researcherry. Он модифицирует `src/vs/platform/extensionManagement/node/extensionManagementService.ts`, удаляя ссылку на `VerifyExtensionSignatureConfigKey` и принудительно устанавливая `verifySignature` в `false` в методе `install` класса `ExtensionManagementService`. Это означает, что Researcherry не будет проверять цифровые подписи расширений при их установке, что может быть полезно для установки неофициальных или модифицированных расширений, но также снижает уровень безопасности.

### `ext-from-gh.patch`

**Назначение:** Этот патч изменяет логику загрузки встроенных расширений, чтобы они загружались напрямую из VSIX-файлов, а не из Marketplace. Он модифицирует файлы `build/lib/builtInExtensions.js` и `build/lib/builtInExtensions.ts`, удаляя код, который использовал `productjson.extensionsGallery?.serviceUrl` для загрузки расширений из Marketplace. Это изменение направлено на то, чтобы Researcherry не зависел от официального Marketplace VS Code, что соответствует стратегии отделения от Microsoft и использования собственных или сторонних источников расширений.

### `extensions-disable-mangler.patch`

**Назначение:** Этот патч отключает процесс "mangling" (обфускации/сокращения имен) для расширений. Он модифицирует `extensions/mangle-loader.js`, изменяя условие, которое ранее проверяло `this.mode !== 'production'`, чтобы всегда возвращать исходный код без манлинга. Это означает, что даже в производственных сборках код расширений не будет подвергаться обфускации, что может упростить отладку и анализ кода, но потенциально увеличивает размер файлов и снижает производительность. Для Researcherry это может быть сделано для упрощения разработки или интеграции, а также для обеспечения совместимости с определенными расширениями.

### `feat-announcements.patch`

**Назначение:** Этот патч добавляет функциональность отображения объявлений на странице приветствия Researcherry. Он вводит новую конфигурационную опцию `workbench.welcomePage.extraAnnouncements`, которая позволяет включать или отключать загрузку дополнительных объявлений из репозитория `!!APP_NAME!!`. Также добавляется логика для определения типа `AnnouncementEntry`, создания списка `BUILTIN_ANNOUNCEMENTS` и реализации метода `buildAnnouncementList()`, который загружает объявления из файла `announcements-extra.json` по URL `https://raw.githubusercontent.com/!!GH_REPO_PATH!!/{branch}/announcements-extra.json`. Если загрузка не удалась, используются встроенные объявления. Этот патч улучшает коммуникацию и информирование пользователей о новостях проекта.

### `feat-ext-unsafe.patch`

**Назначение:** Этот патч добавляет опцию для отключения проверки "небезопасных" расширений. Он вводит новую конфигурационную опцию `extensions.excludeUnsafes` (по умолчанию `true`), которая контролирует, будет ли Researcherry загружать и кэшировать списки вредоносных и устаревших расширений. Если эта опция установлена в `false`, то проверка на "небезопасные" расширения отключается, и соответствующие списки не загружаются. Это позволяет устанавливать и использовать расширения, которые в противном случае были бы помечены как вредоносные или устаревшие. Это изменение может быть полезно для разработчиков, которым нужна полная свобода в использовании расширений, но оно снижает уровень безопасности.

### `fix-electron-esm.patch.bak`

**Назначение:** Этот патч предназначен для исправления проблем совместимости с модулями ES (ESM) в процессе загрузки Electron. Он модифицирует файл `node_modules/@vscode/gulp-electron/src/download.js`, изменяя способ импорта функции `downloadArtifact` из пакета `@electron/get` с синхронного `require` на асинхронный `import`. Это обеспечивает совместимость с ES-модулями и добавляет механизм ожидания, чтобы `downloadArtifact` был доступен перед использованием. Расширение `.bak` указывает на то, что это может быть резервная копия или неактивный патч.

### `fix-eol-banner.patch`

**Назначение:** Этот патч добавляет функциональность "больше не показывать" для баннеров, таких как баннеры об окончании поддержки (EOL). Он модифицирует систему баннеров в Researcherry, позволяя пользователям скрывать определенные баннеры навсегда или на определенный срок. Патч добавляет опцию `neverShowAgain` к интерфейсу `IBannerItem`, которая позволяет определить, должен ли баннер быть показан снова после закрытия, и включает логику для сохранения этого предпочтения в `IStorageService`.

### `fix-remote-libs.patch`

**Назначение:** Этот патч добавляет библиотеку `tslib` в зависимости удаленных компонентов Researcherry. Он модифицирует файлы `remote/package-lock.json` и `remote/package.json`, добавляя `tslib` в качестве зависимости. `tslib` — это вспомогательная библиотека для TypeScript, содержащая функции-хелперы, необходимые для таких конструкций, как `async/await`, декораторы и т.д. Ее добавление, вероятно, решает проблемы совместимости или обеспечивает корректную работу определенных функций TypeScript в удаленной части проекта, гарантируя, что удаленные компоненты имеют необходимую поддержку во время выполнения для своего TypeScript-кода.

### `force-russian-locale.patch`

**Назначение:** Этот патч пуст и не вносит никаких изменений в кодовую базу. Возможно, он был создан как заготовка или его содержимое было удалено.

### `merge-user-product.patch`

**Назначение:** Этот патч позволяет пользователям настраивать конфигурацию продукта Researcherry через файл `product.json`, расположенный в директории пользовательских данных. Он модифицирует `src/main.ts` и `src/vs/platform/product/common/product.ts`. В `src/main.ts` добавляется функция `resolveUserProduct`, которая загружает `product.json` из пути пользовательских данных и сохраняет его в `globalThis._VSCODE_USER_PRODUCT_JSON`. Эта функция вызывается при запуске приложения. В `src/vs/platform/product/common/product.ts` реализована логика слияния загруженной пользовательской конфигурации продукта с существующей, что позволяет переопределять или добавлять параметры продукта, такие как URL-адреса галереи расширений, через пользовательский `product.json`. Также патч учитывает переменные окружения для URL-адресов галереи расширений. Это изменение предоставляет гибкость в настройке Researcherry.

### `optional-tree-sitter.patch`

**Назначение:** Этот патч изменяет статус зависимости `tree-sitter` на опциональную. Он модифицирует файлы `build/package-lock.json` и `build/package.json`, делая `tree-sitter` опциональной зависимостью вместо обычной. Это означает, что `tree-sitter` больше не является строго обязательным для процесса сборки Researcherry, что позволяет собирать приложение, даже если `tree-sitter` не может быть установлен или не нужен. Это обеспечивает большую гибкость в среде сборки и снижает потенциальные проблемы, связанные с нативными зависимостями `tree-sitter`.

### `policies.patch`

**Назначение:** Этот патч переключает использование модуля `policy-watcher` с `@vscode/policy-watcher` на `@vscodium/policy-watcher` и обновляет пути политик для использования плейсхолдера `!!ORG_NAME!!`. Он изменяет ссылки на пакет `policy-watcher` и заменяет жестко закодированное имя "Microsoft" на плейсхолдер `!!ORG_NAME!!` в путях реестра политик. Это обеспечивает корректное отображение бренда Researcherry в системных политиках и отвязывает проект от зависимостей Microsoft.

### `profiles-feature.patch`

**Назначение:** Этот патч добавляет функциональность профилей в Researcherry, позволяя переключаться между режимами "Исследователь" и "Разработчик", а также автоматически устанавливает профиль "Исследователь" по умолчанию для новых пользователей. Он вводит новую контрибуцию `researcherry`, которая регистрирует команды для переключения профилей, реализует механизм автоматической установки профиля при первом запуске, включает поддержку локализации для новых строк и интегрирует новую контрибуцию в основную часть приложения. Этот патч значительно улучшает пользовательский опыт, предоставляя предопределенные профили для различных ролей и автоматизируя первоначальную настройку для новых пользователей Researcherry.

### `profiles.patch`

**Назначение:** Этот патч является дубликатом `profiles-feature.patch` и выполняет те же функции. Он добавляет функциональность профилей в Researcherry, позволяя переключаться между режимами "Исследователь" и "Разработчик", а также автоматически устанавливает профиль "Исследователь" по умолчанию для новых пользователей. Он вводит новую контрибуцию `researcherry`, которая регистрирует команды для переключения профилей, реализует механизм автоматической установки профиля при первом запуске, включает поддержку локализации для новых строк и интегрирует новую контрибуцию в основную часть приложения. Этот патч значительно улучшает пользовательский опыт, предоставляя предопределенные профили для различных ролей и автоматизируя первоначальную настройку для новых пользователей Researcherry.

### `remove-mangle.patch`

**Назначение:** Этот патч отключает процесс манлинга (обфускации) кода во время сборки. Он удаляет функциональность манлинга из файлов `build/lib/compilation.js` и `build/lib/compilation.ts`. Отключение манлинга упрощает отладку и может повысить совместимость с некоторыми инструментами или расширениями, так как код остается более читаемым и предсказуемым. Это изменение делает Researcherry более открытым и удобным для разработки и анализа.

### `remove-russian-language-pack.patch`

**Назначение:** Этот патч удаляет запись о русском языковом пакете (`ms-ceintl.vscode-language-pack-ru`) из файла `product.json`. Это изменение, вероятно, направлено на то, чтобы Researcherry не зависел от языковых пакетов Microsoft или чтобы управлять локализацией другим способом, например, через собственные механизмы или опциональную установку. Удаление предустановленного пакета уменьшает размер базовой установки и дает больше контроля над языковыми ресурсами.

### `report-issue.patch`

**Назначение:** Этот патч адаптирует функциональность отчета о проблемах под брендинг Researcherry и его репозиторий на GitHub. Он изменяет информацию о версии приложения в отчетах, перенаправляет поиск проблем на GitHub-репозиторий Researcherry, заменяет упоминания "Visual Studio Code" на "!!APP_NAME!!" в пользовательском интерфейсе и обновляет ссылки на руководство по отправке ошибок. Этот патч обеспечивает, что все отчеты о проблемах и связанные с ними сообщения соответствуют бренду Researcherry и направляют пользователей в правильное место для получения поддержки.

### `researcherry-welcome-page.patch`

**Назначение:** Этот патч кардинально меняет страницу приветствия Researcherry, адаптируя ее под новый бренд и основное назначение проекта как платформы для AI-агентов. Он упрощает и изменяет начальные опции на странице приветствия, полностью заменяет стандартный тур "Setup" на новый тур "ResearcherryAI" с обновленным названием, описанием, иконкой и содержанием шагов, фокусирующимся на объяснении платформы, ее работы, достигнутых результатов и уникальных преимуществ. Также удаляется веб-специфичный тур "SetupWeb". Этот патч критически важен для формирования первого впечатления пользователя и позиционирования Researcherry как специализированной платформы для AI-агентов в области исследования клиентов.

### `skip-language-packs.patch`

**Назначение:** Этот патч изменяет процесс синхронизации встроенных расширений, чтобы пропускать языковые пакеты. Он модифицирует файл `build/lib/builtInExtensions.js`, добавляя логику в функцию `syncExtension`. Если `controlState` равен `'marketplace'` и имя расширения начинается с `ms-ceintl.vscode-language-pack-`, то синхронизация этого расширения пропускается. Это помогает избежать ошибок при сборке и дает больше контроля над тем, какие языковые пакеты включаются в сборку Researcherry.

### `terminal-suggest.patch`

**Назначение:** Этот патч интегрирует брендинг Researcherry в функцию предложений терминала. Он создает новые файлы спецификаций (`extensions/terminal-suggest/src/completions/codium-insiders.ts` и `extensions/terminal-suggest/src/completions/codium.ts`), которые определяют спецификации для автодополнения команд терминала, используя плейсхолдеры `!!BINARY_NAME!!` и `!!APP_NAME!!`. Затем он модифицирует `extensions/terminal-suggest/src/terminalSuggestMain.ts`, чтобы импортировать и включать эти новые спецификации в список доступных предложений терминала. Таким образом, этот патч обеспечивает, что предложения команд в терминале соответствуют брендингу Researcherry, улучшая пользовательский опыт и единообразие.

### `update-cache-path.patch`

**Назначение:** Этот патч изменяет путь к кэшу обновлений в Windows, чтобы он соответствовал имени приложения Researcherry. Он модифицирует файл `src/vs/platform/update/electron-main/updateService.win32.ts`, изменяя способ формирования пути к временному кэшу обновлений. Изначально путь включал "vscode-", но после применения этого патча он будет использовать `this.productService.applicationName` (то есть "Researcherry") вместо "vscode". Это изменение является частью общего ребрендинга и гарантирует, что временные файлы и кэш обновлений будут корректно ассоциироваться с именем приложения Researcherry, а не с VSCodium или VS Code.

### `update-electron.patch.no`

**Назначение:** Этот патч обновляет версию Electron, используемую в проекте, с `34.5.1` до `34.5.4`. Он вносит изменения в несколько файлов:
- `.npmrc`: Обновляет целевую версию Electron.
- `build/checksums/electron.txt`: Обновляет контрольные суммы для различных компонентов Electron (chromedriver, electron, ffmpeg, hunspell, libcxx, mksnapshot) для новой версии.
- `cgmanifest.json`: Обновляет хеш коммита и версию Electron.
- `package-lock.json` и `package.json`: Обновляет зависимость Electron до новой версии.

Это обновление обеспечивает использование более новой и, вероятно, более стабильной или производительной версии Electron, что может включать исправления ошибок, улучшения безопасности или новые функции, унаследованные от базовой платформы.

### `update-russian-language-pack.patch`

**Назначение:** Этот патч обновляет версию русского языкового пакета (`ms-ceintl.vscode-language-pack-ru`) в файле `product.json` с `1.90.0` на `1.99.0`. Это изменение гарантирует, что Researcherry использует самую актуальную версию русского языкового пакета, что может включать исправления ошибок, улучшения перевода или поддержку новых функций.

### `use-github-pat.patch`

**Назначение:** Этот патч отключает проверку поддерживаемых клиентов и хостингов для GitHub аутентификации. Он модифицирует файл `extensions/github-authentication/src/common/env.ts`, изменяя функции `isSupportedClient` и `isHostedGitHubEnterprise` так, чтобы они всегда возвращали `false`. Это, по сути, отключает встроенные проверки на то, является ли клиент или целевой хост поддерживаемым для аутентификации через GitHub. Вероятно, это сделано для того, чтобы позволить использовать Personal Access Token (PAT) или другие методы аутентификации, не зависящие от этих проверок, или для упрощения процесса аутентификации в специфических сценариях использования Researcherry.

### `version-0-release.patch`

**Назначение:** Этот патч упрощает схему версионирования для Linux-пакетов (deb, rpm, snap) и стандартизирует версию, доступную для расширений.
- В `build/gulpfile.vscode.linux.js` он удаляет использование `linuxPackageRevision` и заменяет сложные строки версий (например, `packageJson.version + '-' + linuxPackageRevision` или `commit.substr(0, 8)`) на простую `packageJson.version` для пакетов `.deb`, `.rpm` и `.snap`. Это делает версии пакетов более чистыми и соответствующими основной версии проекта.
- В `src/vs/workbench/api/common/extHost.api.impl.ts` он изменяет способ получения версии, доступной через `vscode.version` для расширений. Теперь из полной строки версии (например, `1.90.0-insider`) извлекается только часть `major.minor.patch` (например, `1.90.0`). Это обеспечивает единообразие и предсказуемость версии, которую видят расширения, что важно для их совместимости.

Этот патч, вероятно, является частью подготовки к "нулевому" релизу или упрощенной схеме версионирования, где акцент делается на стабильной, чистой версии без дополнительных суффиксов сборки.

### `version-1-update.patch`

**Назначение:** Этот патч существенно перерабатывает механизм обновления приложения, добавляя поддержку различных типов установки и улучшая логику проверки версий.
- В `src/vs/platform/update/common/update.ts` добавляется новый тип обновления `WindowsInstaller` и вводятся новые типы данных (`Architecture`, `Platform`, `Quality`, `Target`) для более точного определения параметров обновления.
- Функция `createUpdateURL` в `src/vs/platform/update/electron-main/abstractUpdateService.ts` переработана для использования этих новых параметров, что позволяет формировать более специфичные URL-адреса для получения обновлений.
- В `src/vs/platform/update/electron-main/updateService.darwin.ts`, `src/vs/platform/update/electron-main/updateService.linux.ts` и `src/vs/platform/update/electron-main/updateService.win32.ts` обновляется логика проверки обновлений. Теперь перед запуском автоматического обновления происходит предварительная проверка доступной версии с использованием `semver.compareBuild`, что позволяет избежать ненужных загрузок и установок, если текущая версия уже актуальна или новее.
- Для Windows (`src/vs/platform/update/electron-main/updateService.win32.ts`) добавлена специальная обработка для `WindowsInstaller`, что позволяет корректно устанавливать обновления, распространяемые через MSI-пакеты, используя `msiexec.exe`. Также улучшена функция `getUpdateType` для более точного определения типа установки.

Этот патч направлен на повышение надежности и гибкости процесса обновления, обеспечивая поддержку различных сценариев развертывания и более интеллектуальную проверку доступных версий.

### `welcome-page-russian.patch`

**Назначение:** Этот патч локализует некоторые элементы приветственной страницы Researcherry на русский язык.

- В файле `src/vs/workbench/contrib/welcomeGettingStarted/common/gettingStartedContent.ts` изменяются значения, передаваемые в функцию `localize`, с английских строк на их русские эквиваленты. Например, `localize('gettingStarted.newFile.title', "New File...")` становится `localize('gettingStarted.newFile.title', "Новый файл...").`

Этот патч является частью усилий по локализации Researcherry, делая его более удобным для русскоязычных пользователей.

### `add-russian-pack.patch`

**Назначение:** Этот файл патча пуст и не содержит никаких изменений. Вероятно, он не используется или является остатком от предыдущих операций.

### `brand.patch`

**Назначение:** Этот патч выполняет обширный ребрендинг приложения, заменяя все упоминания "VS Code" на плейсхолдер `!!APP_NAME!!`.

- Патч является центральным элементом ребрендинга VSCodium в Researcherry. Его основная цель — заменить все текстовые упоминания "VS Code" на динамический плейсхолдер `!!APP_NAME!!`, который затем будет заменен фактическим именем приложения (Researcherry) во время сборки.
- Патч затрагивает множество файлов, в основном `package.nls.json` (файлы локализации расширений) и некоторые TypeScript-файлы (`.ts`).
- Примеры изменений включают:
    - В `extensions/configuration-editing/src/configurationEditingMain.ts` и `src/settingsDocumentHelper.ts` описания переменных, таких как `workspaceFolder` и `appName`, изменяются с "VS Code" на `!!APP_NAME!!`.
    - В `extensions/css-language-features/package.nls.json`, `extensions/emmet/package.nls.json`, `extensions/extension-editing/src/constants.ts`, `extensions/extension-editing/src/extensionLinter.ts`, `extensions/git/package.nls.json`, `extensions/github/package.nls.json`, `extensions/grunt/package.nls.json`, `extensions/html-language-features/client/src/htmlClient.ts`, `extensions/html-language-features/package.nls.json`, `extensions/html-language-features/schemas/package.schema.json`, `extensions/jake/package.nls.json`, `extensions/json-language-features/package.nls.json`, `extensions/markdown-language-features/package.nls.json`, `extensions/media-preview/package.nls.json`, `extensions/media-preview/src/audioPreview.ts`, `extensions/media-preview/src/imagePreview/index.ts`, `extensions/media-preview/src/videoPreview.ts`, `extensions/notebook-renderers/package.json`, `extensions/npm/package.nls.json`, `extensions/swift/syntaxes/swift.tmLanguage.json`, `extensions/typescript-language-features/package.nls.json` и других файлах, все ссылки на "VS Code" заменяются на `!!APP_NAME!!`. Это включает описания функций, сообщения об ошибках, названия расширений и другие элементы пользовательского интерфейса.

Этот патч является критически важным для создания единого и последовательного брендинга Researcherry по всему приложению.

### `chat.patch`

**Назначение:** Этот патч изменяет значение по умолчанию для настройки `chat.commandCenter.enabled` с `true` на `false`.

- В файле `src/vs/workbench/contrib/chat/browser/chat.contribution.ts` строка `default: true` для настройки `chat.commandCenter.enabled` изменяется на `default: false`.

Это изменение, вероятно, направлено на то, чтобы предоставить пользователям больше контроля над функциями чата или интегрировать их по-другому, не активируя их по умолчанию.

### `cli.patch`

**Назначение:** Этот патч вносит значительные изменения в логику обновления и загрузки компонентов CLI, а также в управление путями к исполняемым файлам.

- Патч рефакторит механизмы обновления и загрузки CLI, делая их более гибкими и настраиваемыми через переменные окружения. Он также адаптирует систему к новой схеме именования и загрузки, использующей `APP_NAME` и `BINARY_NAME`, и изменяет способ определения исполняемых файлов сервера и идентификации платформ.
- **`cli/src/commands/serve_web.rs`**: Изменяет сообщение логирования при загрузке сервера, добавляя имя релиза, и добавляет `.unwrap()` к вызову `server_entrypoint()`.
- **`cli/src/constants.rs`**: Добавляет новые переменные окружения: `VSCODE_CLI_UPDATE_ENDPOINT`, `VSCODE_CLI_DOWNLOAD_ENDPOINT`, `VSCODE_CLI_APP_NAME`, `VSCODE_CLI_BINARY_NAME`. Также переименовывает `VSCODE_CLI_UPDATE_URL` в `VSCODE_CLI_UPDATE_ENDPOINT`. Эти переменные позволяют настраивать пути для обновления и загрузки, а также брендинг CLI.
- **`cli/src/options.rs`**: Модифицирует функцию `server_entrypoint` в перечислении `Quality` для использования `VSCODE_CLI_BINARY_NAME` и возврата `Result`, а не `String`. Удаляется использование `SERVER_NAME_MAP`. Это делает определение исполняемого файла сервера более динамичным и зависимым от имени бинарника, заданного через переменные окружения.
- **`cli/src/tunnels/code_server.rs` и `cli/src/tunnels/paths.rs`**: Добавляет `.unwrap()` к вызову `server_entrypoint()`, что соответствует изменениям в `options.rs`.
- **`cli/src/update_service.rs`**: Обновляет функции `get_latest_commit` и `get_download_stream` для использования новых констант `VSCODE_CLI_APP_NAME`, `VSCODE_CLI_DOWNLOAD_ENDPOINT` и `VSCODE_CLI_UPDATE_ENDPOINT`. Формат URL для загрузки значительно изменяется, становясь более общим и зависящим от методов `os()` и `arch()` из перечисления `Platform`. Удаляются функции `TargetKind::download_segment` и `Platform::archive`, `Platform::headless`, `Platform::cli`, и вводятся новые функции `Platform::arch` и `Platform::os` для более гранулярного определения архитектуры и операционной системы.

Этот патч является ключевым для обеспечения гибкости в распространении и обновлении CLI, позволяя легко адаптировать его под различные бренды и конфигурации сборки.

### `disable-cloud.patch`

**Назначение:** Этот патч отключает функциональность "Cloud Changes" (Облачные изменения) в приложении, которая, вероятно, связана с синхронизацией данных пользователя через облачные сервисы.

- Этот патч удаляет интеграцию с облачными службами синхронизации, такими как "Edit Sessions" (Сессии редактирования), которые позволяют синхронизировать изменения между устройствами. Это может быть сделано для удаления зависимостей от сторонних облачных сервисов или для реализации собственной системы синхронизации в Researcherry.
- **`src/vs/workbench/contrib/editSessions/browser/editSessionsStorageService.ts`**:
    - Удаляет импорт `MenuRegistry` и `EDIT_SESSIONS_PENDING_KEY`.
    - Удаляет вызов `this.registerSignInAction();`, который отвечал за регистрацию действия "Turn on Cloud Changes..." (Включить облачные изменения).
    - Полностью удаляет метод `registerSignInAction`, который отвечал за регистрацию действия в палитре команд и контекстном меню учетных записей.

Это изменение эффективно отключает функцию "Cloud Changes", что соответствует стратегии Researcherry по созданию независимого и контролируемого окружения.

### `disable-localization.patch`

**Назначение:** Этот патч изменяет процесс сборки локализации, позволяя продолжить сборку даже при отсутствии репозитория с переводами.

- Этот патч обеспечивает, что сборка приложения не прерывается, если репозиторий `vscode-loc` (содержащий файлы локализации) отсутствует. Вместо того чтобы требовать наличия этих файлов, патч создает пустые файлы сообщений NLS (National Language Support), позволяя приложению запускаться без полноценной локализации.
- В файле `build/lib/i18n.js`, в функции `processCoreBundleFormat`, добавлен блок кода.
- Этот блок проверяет существование директории `vscode-loc/i18n`.
- Если директория не найдена, патч генерирует пустые файлы `nls.messages.<language.id>.js` для каждого языка. Эти файлы содержат минимальную информацию, необходимую для работы системы NLS, но без реальных переведенных строк.

Это изменение полезно для разработчиков, которым не нужна полная локализация во время разработки, или для сценариев сборки, где репозиторий локализации недоступен. Оно предотвращает ошибки сборки, связанные с отсутствием файлов локализации.

### `disable-signature-verification.patch`

**Назначение:** Этот патч отключает проверку подписи расширений в приложении.

- Этот патч предназначен для отключения механизма проверки подписи расширений, который обычно используется для обеспечения безопасности и целостности устанавливаемых расширений. Отключение этой проверки может быть необходимо для установки расширений из неофициальных источников или для упрощения процесса разработки и тестирования.
- В файле `src/vs/platform/extensionManagement/node/extensionManagementService.ts`:
    - Удаляется импорт `VerifyExtensionSignatureConfigKey`.
    - Добавляется `@ts-expect-error no-unused-variable` к `IConfigurationService`, что указывает на то, что `configurationService` больше не используется для проверки подписи.
    - В блоке, отвечающем за проверку подписи (`if (verifySignature)`), логика чтения значения из конфигурации удаляется, и переменная `verifySignature` принудительно устанавливается в `false`.

Это изменение позволяет устанавливать расширения без предварительной проверки их цифровой подписи, что может быть полезно в контролируемых средах или при работе с кастомными расширениями.

### `ext-from-gh.patch`

**Назначение:** Этот патч изменяет логику загрузки встроенных расширений, отключая их загрузку из стандартного Marketplace.

- Этот патч, вероятно, предназначен для того, чтобы Researcherry загружал встроенные расширения не из официального Marketplace VS Code, а из альтернативного источника, например, напрямую с GitHub или из собственного репозитория. Это дает больший контроль над распространением и версиями расширений.
- В файлах `build/lib/builtInExtensions.js` и `build/lib/builtInExtensions.ts` удаляется блок кода, который использовал `productjson.extensionsGallery?.serviceUrl` для загрузки расширений через `ext.fromMarketplace`.

Это изменение означает, что встроенные расширения теперь должны быть доступны локально или загружаться другим способом, не зависящим от стандартного Marketplace.

### `extensions-disable-mangler.patch`

**Назначение:** Этот патч отключает процесс "mangling" (обфускации/сокращения имен) для расширений.

- Этот патч принудительно отключает обфускацию кода расширений, независимо от режима сборки (production или development). Обфускация обычно используется для уменьшения размера файлов и затруднения обратного инжиниринга в production-сборках. Отключение может быть полезно для отладки, анализа кода или если обфускация вызывает проблемы совместимости.
- В файле `extensions/mangle-loader.js` строка `if (this.mode !== 'production')` изменяется на `if (true)`.

Это изменение гарантирует, что код расширений не будет обфусцироваться, что упрощает их чтение и отладку.

### `feat-announcements.patch`

**Назначение:** Этот патч добавляет новую функциональность на страницу приветствия (Welcome Page) — отображение объявлений, загружаемых из репозитория Researcherry.

- Этот патч расширяет возможности страницы приветствия, позволяя динамически отображать актуальные объявления или новости, которые могут быть загружены из удаленного источника (например, GitHub-репозитория проекта Researcherry). Это обеспечивает гибкий способ информирования пользователей о новых функциях, обновлениях или важных событиях.
- **`src/vs/workbench/contrib/welcomeGettingStarted/browser/gettingStarted.contribution.ts`**:
    - Добавляет новую настройку `workbench.welcomePage.extraAnnouncements` (по умолчанию `true`), которая контролирует, будут ли загружаться дополнительные объявления из репозитория `!!APP_NAME!!`. Это позволяет включать/отключать эту функцию.
- **`src/vs/workbench/contrib/welcomeGettingStarted/browser/gettingStarted.ts`**:
    - Определяет новый тип `AnnouncementEntry` для структуры объявлений (id, title, url).
    - Вводит `BUILTIN_ANNOUNCEMENTS` для встроенных объявлений.
    - Добавляет `announcementList` и `announcementData` в класс `GettingStartedPage`.
    - Реализует асинхронный метод `buildAnnouncementList`, который:
        - Проверяет значение настройки `workbench.welcomePage.extraAnnouncements`.
        - Если настройка включена, пытается загрузить JSON-файл с объявлениями (`announcements-extra.json`) из репозитория `!!GH_REPO_PATH!!` (используя ветку `insider` или `master` в зависимости от качества сборки).
        - В случае успешной загрузки объединяет удаленные объявления со встроенными.
        - В случае ошибки загрузки или если настройка отключена, использует только встроенные объявления.
    - Интегрирует список объявлений в правую колонку страницы приветствия, рядом с другими элементами.

Этот патч значительно улучшает информативность страницы приветствия, делая ее центральным хабом для новостей и объявлений Researcherry.

### `feat-ext-unsafe.patch`

**Назначение:** Этот патч добавляет новую конфигурационную опцию, которая позволяет отключать фильтрацию "небезопасных" (вредоносных или устаревших) расширений.

- Этот патч предоставляет возможность игнорировать списки вредоносных и устаревших расширений, которые обычно загружаются из онлайн-сервисов. Это может быть полезно для разработчиков, которым нужно тестировать или использовать расширения, помеченные как "небезопасные", или для сред, где эти списки недоступны или неактуальны.
- **`src/vs/workbench/contrib/extensions/browser/extensions.contribution.ts`**:
    - Добавляет новую настройку `extensions.excludeUnsafes` (по умолчанию `true`), которая контролирует, будет ли загружаться и кэшироваться список вредоносных и устаревших расширений.
- **`src/vs/platform/extensionManagement/common/extensionGalleryService.ts`**:
    - В методе `get` (вероятно, `get and filter extensions`) проверяется значение `extensions.excludeUnsafes`.
    - Если `extensions.excludeUnsafes` установлено в `false`, метод возвращает пустые списки для вредоносных (`malicious`), устаревших (`deprecated`) и результатов поиска (`search`), фактически отключая фильтрацию по этим категориям.

Этот патч дает пользователям или администраторам больше контроля над тем, как приложение обрабатывает потенциально "небезопасные" расширения.

### `fix-electron-esm.patch.bak`

**Назначение:** Этот патч (вероятно, резервная копия или неактивный патч) предназначен для решения проблемы совместимости с ES-модулями в пакете `@electron/get`, используемом в `gulp-electron`.

- Этот патч исправляет проблему, связанную с тем, что модуль `@electron/get` (который используется для загрузки Electron) может быть ES-модулем, а `gulp-electron` использует CommonJS. Он обеспечивает корректную загрузку `downloadArtifact` путем динамического импорта и добавляет механизм ожидания завершения этого импорта.
- В файле `node_modules/@vscode/gulp-electron/src/download.js`:
    - Исходная строка `const { downloadArtifact } = require("@electron/get");` заменяется на динамический импорт:
        ```javascript
        let downloadArtifact;
        (async () => {
            const electronGet = await import("@electron/get");
            downloadArtifact = electronGet.downloadArtifact;
        })();
        ```
    - Добавляется блок кода, который использует `setTimeout` для повторного вызова функции `downloadElectron`, если `downloadArtifact` еще не определен (то есть, динамический импорт еще не завершился). Это гарантирует, что функция будет ждать загрузки модуля.

Этот патч важен для обеспечения совместимости с более новыми версиями Electron и связанными с ними инструментами сборки, которые могут использовать ES-модули.

### `fix-eol-banner.patch`

**Назначение:** Этот патч добавляет функциональность "больше не показывать" для баннеров (например, баннеров об окончании поддержки), позволяя пользователям скрывать их на определенный срок или навсегда.

- Этот патч улучшает пользовательский опыт, предоставляя возможность управлять видимостью информационных баннеров. Это особенно полезно для баннеров, которые могут быть навязчивыми, но содержат важную информацию, которую пользователь может захотеть скрыть после ознакомления.
- **`src/vs/workbench/services/banner/browser/bannerService.ts`**:
    - В интерфейс `IBannerItem` добавляется опциональное свойство `neverShowAgain` типа `INeverShowAgainOptions`. Это позволяет определить, может ли баннер быть скрыт навсегда, и в каком контексте (например, для всего приложения, для текущего профиля или для текущего рабочего пространства).
- **`src/vs/workbench/browser/parts/banner/bannerPart.ts`**:
    - Добавляется логика, которая проверяет, был ли баннер ранее скрыт пользователем с помощью опции `neverShowAgain`.
    - Используется `IStorageService` для сохранения и проверки состояния "больше не показывать" на основе `id` баннера и его `scope` (область действия).
    - Внедряется вспомогательная функция `toStorageScope`, которая преобразует `NeverShowAgainScope` в `StorageScope` для корректного хранения в хранилище.

Этот патч делает баннеры более гибкими и менее навязчивыми для пользователей, давая им контроль над отображением важных, но потенциально повторяющихся сообщений.

### `fix-remote-libs.patch`

**Назначение:** Этот патч добавляет зависимость `tslib` в `remote/package.json` и `remote/package-lock.json`.

- Этот патч, вероятно, решает проблемы, связанные с отсутствием или некорректной версией библиотеки `tslib` в удаленных компонентах проекта. `tslib` — это небольшая вспомогательная библиотека для TypeScript, которая содержит общие функции, используемые компилятором TypeScript (например, для поддержки `async/await`, декораторов и т.д.). Ее добавление обеспечивает корректную работу скомпилированного TypeScript-кода в удаленных частях приложения.
- В файлах `remote/package.json` и `remote/package-lock.json` добавляется зависимость `tslib` с версией `^2.6.3` (в `package.json`) и `2.7.0` (в `package-lock.json`).

Это изменение гарантирует, что удаленные части приложения будут иметь все необходимые вспомогательные функции для корректного выполнения TypeScript-кода.

### `merge-user-product.patch`

**Назначение:** Этот патч добавляет функциональность, позволяющую приложению загружать и объединять пользовательский файл `product.json` с системным. Это дает пользователям возможность настраивать различные аспекты приложения без изменения его исходного кода.

- Этот патч позволяет пользователям переопределять или дополнять конфигурацию `product.json` (который содержит основные параметры приложения, такие как названия, ссылки на галереи расширений и т.д.) путем размещения собственного файла `product.json` в директории пользовательских данных. Это обеспечивает гибкую настройку приложения, например, изменение ссылок на Marketplace или других брендовых элементов.
- **`src/main.ts`**:
    - Добавляет `createRequire` для использования `require` в контексте ES-модулей.
    - Вводит функцию `resolveUserProduct`, которая пытается загрузить `product.json` из директории пользовательских данных (`userDataPath`). Если файл найден, его содержимое сохраняется в `globalThis._VSCODE_USER_PRODUCT_JSON`.
    - Функция `resolveUserProduct` вызывается на этапе запуска приложения, чтобы пользовательская конфигурация была доступна.
- **`src/vs/platform/product/common/product.ts`**:
    - Добавляет логику для объединения (глубокого слияния) системного объекта `product` с пользовательским `globalThis._VSCODE_USER_PRODUCT_JSON`.
    - Определяет вспомогательную функцию `merge` для рекурсивного объединения объектов.
    - Также позволяет переопределять URL-адреса `extensionsGallery` с помощью переменных окружения, что добавляет еще один уровень гибкости в настройке.

Этот патч является ключевым для обеспечения кастомизации Researcherry, позволяя пользователям адаптировать его под свои нужды, не затрагивая основные файлы проекта.

### `optional-tree-sitter.patch`

**Назначение:** Этот патч изменяет способ включения зависимости `tree-sitter` в процесс сборки, делая ее опциональной.

- Этот патч, вероятно, предназначен для того, чтобы сборка Researcherry могла быть выполнена даже при отсутствии `tree-sitter`, или чтобы `tree-sitter` устанавливался только при необходимости. `tree-sitter` — это парсер, используемый для синтаксического анализа кода, что важно для таких функций, как подсветка синтаксиса и навигация по коду. Сделать его опциональным может быть полезно для облегченных сборок или для сред, где установка `tree-sitter` затруднена.
- В файлах `build/package.json` и `build/package-lock.json`:
    - Зависимость `tree-sitter` перемещается из `dependencies` (обязательные зависимости) в `optionalDependencies` (опциональные зависимости).
    - В `package-lock.json` также изменяются флаги `devOptional` на `optional` для связанных пакетов `tree-sitter`, `tree-sitter-cli` и `tree-sitter-typescript`, что подтверждает их опциональный статус.

Это изменение позволяет более гибко управлять зависимостями сборки, потенциально уменьшая размер конечного продукта или упрощая процесс сборки в определенных сценариях.

### `policies.patch`

**Назначение:** Этот патч вносит значительные изменения, связанные с брендингом и управлением политиками, переименовывая `@vscode/policy-watcher` в `@vscodium/policy-watcher` и заменяя "Microsoft" на "!!ORG_NAME!!" в строках, связанных с политиками. Это важный шаг к ребрендингу и кастомизации системы управления политиками для Researcherry.

- Этот патч является ключевым для ребрендинга Researcherry, обеспечивая, чтобы все конфигурации и пути, связанные с политиками, отражали новую идентичность бренда. Он уходит от путей и имен, специфичных для Microsoft, заменяя их динамическими заполнителями, которые будут заполнены "Researcherry".
- **`build/.moduleignore`**: Обновляет шаблоны игнорирования, чтобы отразить новое имя пакета `@vscodium/policy-watcher`, гарантируя, что процессы сборки правильно обрабатывают переименованный модуль.
- **`build/lib/policies.js` и `build/lib/policies.ts`**: Изменяет путь ключа реестра для политик с `Software\\Policies\\Microsoft\\${regKey}` на `Software\\Policies\\!!ORG_NAME!!\\${regKey}`. Аналогично, пространство имен политики изменяется с `Microsoft.Policies.${regKey}` на `!!ORG_NAME!!.Policies.${regKey}`.
- **`eslint.config.js`**: Обновляет конфигурацию ESLint для использования нового имени пакета `@vscodium/policy-watcher`.
- **`package-lock.json` и `package.json`**: Обновляет зависимости пакетов для ссылки на `@vscodium/policy-watcher` вместо `@vscode/policy-watcher`.
- **`src/vs/platform/environment/test/node/nativeModules.integrationTest.ts`**: Обновляет тестовый файл для импорта и тестирования модуля `@vscodium/policy-watcher`.
- **`src/vs/platform/policy/node/nativePolicyService.ts`**: Изменяет оператор импорта для модуля политики и модифицирует вызов `createWatcher` для передачи `!!ORG_NAME!!` в качестве первого аргумента.

### `profiles-feature.patch`

**Назначение:** Этот патч добавляет в Researcherry функциональность пользовательских профилей, ориентированных на режимы "Исследователь" и "Разработчик", а также механизм автоматической установки профиля "Исследователь" по умолчанию при первом запуске.

- Этот патч является ключевым для адаптации Researcherry под конкретные рабочие процессы, позволяя пользователям быстро переключаться между конфигурациями, оптимизированными для исследования и разработки. Автоматическая установка профиля "Исследователь" подчеркивает основную направленность приложения.
- **`src/vs/workbench/contrib/researcherry/browser/researcherry.contribution.ts` (новый файл)**:
    - Определяет две новые команды: `researcherry.switchToResearcherProfile` и `researcherry.switchToDeveloperProfile`. Эти команды позволяют пользователям переключаться между профилями "Исследователь" и "Разработчик" соответственно, используя встроенную функциональность профилей VS Code (`workbench.profiles.actions.switchProfile`).
    - Вводит класс `ResearcherryProfileContribution`, который отвечает за автоматическую инициализацию профиля "Исследователь" при первом запуске приложения. Он использует `IStorageService` для отслеживания того, был ли профиль уже установлен, предотвращая повторную установку.
- **`src/vs/workbench/contrib/researcherry/browser/researcherry.ts` (новый файл)**:
    - Просто импортирует `researcherry.contribution.ts`, чтобы обеспечить регистрацию новых команд и контрибуций.
- **`src/vs/workbench/workbench.common.main.ts`**:
    - Добавляет импорт для нового модуля `researcherry.js`, интегрируя его в основную часть приложения.
- **`build/lib/i18n.resources.json`**:
    - Включает новый путь `vs/workbench/contrib/researcherry` для интернационализации, что позволяет переводить строки, определенные в новых файлах, на разные языки.

Этот патч значительно улучшает пользовательский опыт, предоставляя специализированные рабочие среды и упрощая первоначальную настройку для новых пользователей Researcherry.

### `remove-mangle.patch`

**Назначение:** Этот патч полностью удаляет процесс обфускации (mangling) кода из основной сборки Researcherry.

- Этот патч, вероятно, направлен на упрощение отладки и улучшение читаемости скомпилированного кода, поскольку обфускация может затруднять анализ кода. Это может быть полезно для внутренней разработки или для сборок, где размер файла не является критичным приоритетом.
- **`build/lib/compilation.js` и `build/lib/compilation.ts`**:
    - Удаляется весь код, связанный с `mangleStream` и классом `Mangler`. Это означает, что этап обфускации, который преобразовывал TypeScript в TypeScript для уменьшения размера кода и затруднения его анализа, полностью исключается из конвейера сборки.
    - Удаляются соответствующие импорты для `Mangler` и `RawSourceMap`.

Это изменение делает скомпилированный код более читаемым и удобным для отладки, но может привести к увеличению размера конечных файлов, так как код не будет минифицирован или обфусцирован.

### `remove-russian-language-pack.patch`

**Назначение:** Этот патч удаляет запись о русском языковом пакете из файла конфигурации `product.json`.

- Этот патч, вероятно, предназначен для удаления предустановленного или стандартного русского языкового пакета из Researcherry. Это может быть сделано по нескольким причинам:
    - Для уменьшения размера стандартной установки.
    - Чтобы пользователи могли устанавливать языковые пакеты вручную при необходимости, предоставляя им больше контроля.
    - Для подготовки к пользовательскому языковому пакету или стратегии локализации, специфичной для Researcherry, вместо использования пакета, предоставленного Microsoft.
- **Изменения:**
    - В `product.json`:
        - Весь JSON-объект, соответствующий расширению `ms-ceintl.vscode-language-pack-ru`, удаляется из массива `builtInExtensions`. Эта запись указывает имя, версию, репозиторий и метаданные для русского языкового пакета.

Этот патч по сути отменяет бандлинг русского языкового пакета, делая его опциональной установкой, а не стандартной.

### `report-issue.patch`

**Назначение:** Этот патч вносит значительные изменения в функциональность сообщения о проблемах в Researcherry, адаптируя её под новый бренд и направляя пользователей в репозиторий Researcherry на GitHub.

- Этот патч переименовывает функцию сообщения о проблемах в Researcherry, чтобы она соответствовала новому названию приложения, и перенаправляет сообщения о проблемах в репозиторий Researcherry на GitHub вместо оригинального репозитория VS Code. Он также удаляет функцию поиска дубликатов проблем, которая, вероятно, использовалась для поиска дубликатов проблем в сервисе, размещенном Microsoft.
- **Изменения:**
    - **`src/vs/workbench/contrib/extensions/electron-browser/extensionsSlowActions.ts`**:
        - Изменяет строку "VS Code version" на "!!APP_NAME!! version" при сообщении о медленных расширениях. Это обеспечивает согласованность брендинга.
    - **`src/vs/workbench/contrib/issue/browser/baseIssueReporterService.ts`**:
        - Заменяет вызов `this.searchDuplicates(title, issueDescription)` на `this.searchGitHub('!!GH_REPO_PATH!!', title)`. Это указывает на переход от поиска дубликатов в определенном сервисе (вероятно, Microsoft) к прямому поиску проблем на GitHub в репозитории `!!GH_REPO_PATH!!`.
        - Полностью удаляет функцию `searchDuplicates`, которая отвечала за выполнение запроса `fetch` к `https://vscode-probot.westus.cloudapp.azure.com:7890/duplicate_candidates`. Это подтверждает удаление поиска дубликатов проблем, специфичного для Microsoft.
        - Заменяет "Visual Studio Code" на "!!APP_NAME!!" и "A VS Code extension" на "A !!APP_NAME!! extension" в параметрах выбора источника проблемы.
        - Изменяет "This extension handles issues outside of VS Code" на "This extension handles issues outside of !!APP_NAME!!".
    - **`src/vs/workbench/contrib/issue/browser/issueReporterModel.ts`**:
        - Изменяет "VS Code version" на "!!APP_NAME!! version" в модели отчета о проблеме, обеспечивая согласованность брендинга в сгенерированном описании проблемы.
    - **`src/vs/workbench/contrib/issue/browser/issueReporterPage.ts`**:
        - Изменяет "I acknowledge that my VS Code version is not updated and this issue may be closed." на "I acknowledge that my !!APP_NAME!! version is not updated and this issue may be closed."
        - Обновляет ссылку для "Submitting Bugs and Suggestions" с `https://github.com/microsoft/vscode/wiki/Submitting-Bugs-and-Suggestions` на `https://github.com/!!GH_REPO_PATH!!/wiki/Submitting-Bugs-and-Suggestions`. Это перенаправляет пользователей на собственную вики Researcherry для получения рекомендаций по сообщению о проблемах.

Этот патч имеет решающее значение для приведения процесса сообщения о проблемах в соответствие с брендом Researcherry и направления пользователей на правильные каналы поддержки.

### `researcherry-welcome-page.patch`

**Назначение:** Этот патч кардинально изменяет страницу приветствия и начальный опыт пользователя в Researcherry, фокусируя его на уникальных возможностях платформы AI-агентов.

- Этот патч перерабатывает страницу "Начало работы" (Getting Started) в Researcherry, чтобы она отражала новый бренд "ResearcherryAI" и представляла платформу как no-code решение для AI-агентов в сфере исследования клиентов. Он упрощает начальные действия, удаляя общие функции VS Code, и добавляет новый контент, объясняющий суть, принципы работы, результаты и преимущества Researcherry.
- **Изменения:**
    - **`src/vs/workbench/contrib/welcomeGettingStarted/common/gettingStartedContent.ts`**:
        - **Импорт и регистрация нового контента:** Добавляется импорт `notebookProfileContent` и его регистрация как провайдера, хотя в этом патче его прямое использование не очевидно.
        - **Изменение описаний начальных действий:**
            - "Новый файл...": Описание изменено с "Открыть новый текстовый файл, блокнот или пользовательский редактор" на "Открыть новый текстовый файл для заметок", что подчеркивает более узкую направленность.
            - "Открыть файл...": Описание изменено на "Открыть файл для начала работы", что является более общим и упрощенным.
            - "Открыть папку...": Описание и заголовок локализованы на русский язык, что улучшает пользовательский опыт для русскоязычных пользователей.
        - **Удаление нерелевантных начальных записей:** Удалены несколько верхнеуровневых записей "Открыть...", таких как "Открыть Mac", "Открыть папку Web", "Клонировать репозиторий Git...", "Открыть репозиторий...", "Подключиться к...", "Открыть туннель...". Это упрощает интерфейс, убирая функции, которые могут быть неактуальны для целевой аудитории Researcherry.
        - **Переработка основного раздела "Начало работы":**
            - Раздел с `id: 'Setup'` переименован в `id: 'ResearcherryAI'`.
            - Заголовок и описание изменены на "Добро пожаловать в ResearcherryAI" и "No-code платформа AI-агентов для исследования клиентов." соответственно.
            - Иконка изменена на `Codicon.beaker`, что соответствует тематике исследований.
            - Оригинальные шаги (выбор темы, расширения, настройки, палитра команд, быстрый доступ, видеоуроки) полностью заменены на новые, специфичные для ResearcherryAI:
                - **"Что такое ResearcherryAI?"**: Объясняет суть платформы.
                - **"Как это работает?"**: Описывает функции AI-агентов.
                - **"Наши результаты"**: Демонстрирует конкретные достижения (скорость анализа, производительность).
                - **"Наше уникальное преимущество"**: Подчеркивает ключевые отличия от конкурентов.
        - **Удаление раздела "SetupWeb":** Полностью удален раздел "Начало работы с Researcherry для Web", что указывает на фокус на десктопной версии или упрощение веб-функциональности.

Этот патч является ключевым для брендинга и позиционирования Researcherry, направляя новых пользователей к пониманию основной ценности продукта с самого начала.

### `skip-language-packs.patch`

**Назначение:** Этот патч изменяет процесс синхронизации встроенных расширений, добавляя логику для пропуска определенных языковых пакетов.

- Этот патч предназначен для предотвращения синхронизации языковых пакетов, начинающихся с `ms-ceintl.vscode-language-pack-`, во время процесса сборки Researcherry. Это, вероятно, сделано для того, чтобы избежать потенциальных ошибок сборки, связанных с этими пакетами, или для обеспечения того, чтобы Researcherry использовал собственную стратегию локализации, а не зависел от стандартных языковых пакетов VS Code.
- **Изменения:**
    - В файле `build/lib/builtInExtensions.js`:
        - В функции `syncExtension` добавлен новый блок логики внутри `switch (controlState)` для `case 'marketplace'`.
        - Если имя расширения (`extension.name`) начинается с `ms-ceintl.vscode-language-pack-`, то это расширение пропускается, и в лог выводится соответствующее сообщение.
        - В результате, такие языковые пакеты не будут синхронизироваться, что позволяет избежать их включения в сборку.

Этот патч обеспечивает больший контроль над процессом сборки и позволяет Researcherry более гибко управлять своими языковыми ресурсами.

### `terminal-suggest.patch`

**Назначение:** Этот патч интегрирует брендинг Researcherry в функцию автодополнения команд в терминале.

- Этот патч добавляет поддержку автодополнения команд для Researcherry и Researcherry Insiders в терминале, используя новые названия приложения. Это часть общего процесса ребрендинга, чтобы обеспечить согласованность пользовательского опыта при работе с терминалом.
- **Изменения:**
    - **`extensions/terminal-suggest/src/completions/codium-insiders.ts` (новый файл):**
        - Создает спецификацию автодополнения для версии "Insiders" Researcherry.
        - Использует плейсхолдеры `!!BINARY_NAME!!-insiders` для имени команды и `!!APP_NAME!! Insiders` для описания, обеспечивая динамический брендинг.
    - **`extensions/terminal-suggest/src/completions/codium.ts` (новый файл):**
        - Аналогично, создает спецификацию автодополнения для основной версии Researcherry.
        - Использует плейсхолдеры `!!BINARY_NAME!!` для имени команды и `!!APP_NAME!!` для описания.
    - **`extensions/terminal-suggest/src/terminalSuggestMain.ts` (изменен):**
        - Импортирует новые спецификации `codiumCompletionSpec` и `codiumInsidersCompletionSpec`.
        - Добавляет эти спецификации в массив `availableSpecs`, делая их доступными для использования в функции автодополнения терминала.

Этот патч гарантирует, что при использовании функции автодополнения в терминале, пользователи будут видеть подсказки, соответствующие бренду Researcherry, что улучшает общую согласованность и пользовательский опыт.

### `update-cache-path.patch`

**Назначение:** Этот патч изменяет путь к кэшу обновлений для Windows-версии приложения, чтобы он соответствовал новому брендингу Researcherry.

- Этот патч гарантирует, что временные файлы и кэш обновлений на операционной системе Windows будут храниться в директории, названной в соответствии с именем приложения Researcherry, а не "vscode". Это необходимо для поддержания согласованности брендинга и предотвращения возможных конфликтов или путаницы с оригинальными установками VS Code.
- **Изменения:**
    - В файле `src/vs/platform/update/electron-main/updateService.win32.ts`:
        - В методе `get cachePath()` строка, формирующая путь к кэшу, изменена.
        - `vscode-${this.productService.quality}-${this.productService.target}-${process.arch}` заменено на `${this.productService.applicationName}-${this.productService.quality}-${this.productService.target}-${process.arch}`.
        - Теперь вместо префикса `vscode-` используется имя приложения, определенное в `productService.applicationName` (которое для Researcherry будет "researcherry").

Этот патч является частью усилий по полному ребрендингу, обеспечивая, что даже внутренние пути файловой системы отражают новое имя продукта.

### `update-electron.patch.no`

**Назначение:** Этот патч обновляет версию фреймворка Electron, на которой основан Researcherry.

- Этот патч обновляет версию фреймворка Electron с `34.5.1` до `34.5.4`. Обновление Electron важно для обеспечения стабильности, безопасности и доступа к новым функциям, а также для исправления ошибок, присутствующих в предыдущих версиях.
- **Изменения:**
    - **`.npmrc`**:
        - Изменяет целевую версию Electron (`target`) с `34.5.1` на `34.5.4`.
    - **`build/checksums/electron.txt`**:
        - Обновляет контрольные суммы (хеши) для всех связанных с Electron файлов, включая `chromedriver`, архивы Electron для различных платформ, `ffmpeg`, `hunspell_dictionaries`, `libcxx-objects` и `mksnapshot`. Это гарантирует, что при сборке будут использоваться правильные файлы для новой версии Electron.
    - **`cgmanifest.json`**:
        - Обновляет `commitHash` и `version` для зависимости Electron, отражая переход на версию `34.5.4`.
    - **`package-lock.json`**:
        - Обновляет запись для пакета `electron`, изменяя `version`, `resolved` URL и `integrity` хэш на соответствующие новой версии `34.5.4`.
    - **`package.json`**:
        - Обновляет версию зависимости `electron` с `34.5.1` на `34.5.4`.

Этот патч является критически важным для поддержания актуальности базовой платформы Researcherry, что влияет на общую производительность, безопасность и совместимость приложения.

### `update-russian-language-pack.patch`

**Назначение:** Этот патч обновляет версию встроенного русского языкового пакета в `product.json`.

- Этот патч обновляет версию русского языкового пакета `ms-ceintl.vscode-language-pack-ru` с `1.90.0` до `1.99.0` в файле `product.json`. Это обеспечивает использование более актуальной версии локализации, что может включать исправления ошибок перевода, улучшения или добавление новых переведенных строк.
- **Изменения:**
    - В файле `product.json`:
        - Изменяется значение поля `version` для языкового пакета `ms-ceintl.vscode-language-pack-ru` с `1.90.0` на `1.99.0`.

Этот патч направлен на поддержание актуальности локализации Researcherry, обеспечивая пользователям доступ к последним переводам.

### `use-github-pat.patch`

**Назначение:** Этот патч изменяет логику аутентификации GitHub, предположительно, для принудительного использования персональных токенов доступа (PAT) или для отключения определенных механизмов OAuth.

- Этот патч модифицирует функции, отвечающие за проверку поддерживаемых клиентов и хостинга GitHub Enterprise, заставляя их всегда возвращать `false`. Это может быть сделано для упрощения процесса аутентификации, повышения безопасности за счет использования PAT, или для отключения стандартного OAuth-потока, который мог бы быть несовместим с особенностями Researcherry.
- **Изменения:**
    - **`extensions/github-authentication/src/common/env.ts`**:
        - **`isSupportedClient(uri: Uri)`**: Исходная функция проверяла схему URI (`vscode`, `vscode-insiders` и т.д.) и домены (`vscode.dev`, `github.dev`), чтобы определить, является ли клиент поддерживаемым для аутентификации GitHub. Патч изменяет эту функцию так, чтобы она всегда возвращала `false`, независимо от входного URI. Это означает, что стандартные механизмы перенаправления OAuth для этих клиентов будут игнорироваться.
        - **`isHostedGitHubEnterprise(uri: Uri)`**: Исходная функция проверяла, является ли домен URI хостингом GitHub Enterprise (например, `.ghe.com`). Патч изменяет эту функцию так, чтобы она также всегда возвращала `false`. Это может указывать на то, что Researcherry не поддерживает или не использует специфические механизмы аутентификации для хостинга GitHub Enterprise.

В целом, этот патч, по-видимому, упрощает или отключает часть сложной логики аутентификации GitHub, возможно, в пользу более прямого подхода с использованием PAT или других методов.

### `version-0-release.patch`

**Назначение:** Этот патч стандартизирует и упрощает схему версионирования для сборок Researcherry, особенно для Linux-пакетов, а также изменяет способ отображения версии в API для расширений.

- Этот патч призван обеспечить более чистую и предсказуемую систему версионирования, используя версию из `package.json` для всех типов Linux-пакетов (deb, rpm, snap) и, возможно, для контроля версии, доступной через API.
- **Изменения:**
    - **`build/gulpfile.vscode.linux.js`**:
        - **Удаление динамических ревизий:** Удалена переменная `linuxPackageRevision`, которая ранее использовалась для добавления временной метки или ревизии к версии `.deb` пакетов.
        - **Упрощение версионирования пакетов:**
            - Для `.deb` пакетов: версия теперь берется напрямую из `packageJson.version`, без добавления `linuxPackageRevision`.
            - Для `.rpm` пакетов: удалена замена `@@RELEASE@@`, что означает, что номер релиза больше не управляется напрямую из этого gulpfile.
            - Для `.snap` пакетов: версия теперь также берется из `packageJson.version` вместо первых 8 символов хеша коммита (`commit.substr(0, 8)`).
        - Эти изменения приводят к тому, что все Linux-пакеты используют единую, статичную версию из `package.json`, что упрощает управление версиями.
    - **`src/vs/workbench/api/common/extHost.api.impl.ts`**:
        - **Модификация API версии:** Введена новая логика для формирования значения `vscode.version`, доступного расширениям.
        - Используется регулярное выражение `^([0-9]+\.[0-9]+\.[0-5]).*$` для извлечения версии. Это выражение захватывает только мажорную, минорную и патч-версию, если патч-версия находится в диапазоне от 0 до 5. Если патч-версия больше 5 или формат не соответствует, результат может быть непредсказуемым. Это может быть сделано для обеспечения совместимости с расширениями, которые ожидают определенный формат версии, или для реализации специфической стратегии версионирования (например, "0-release").

В целом, патч `version-0-release.patch` способствует более унифицированному и, возможно, контролируемому версионированию Researcherry, особенно в контексте его сборок и взаимодействия с расширениями.

### `version-1-update.patch`

**Назначение:** Этот патч значительно перерабатывает механизм обновления Researcherry, делая его более гибким и способным обрабатывать различные типы обновлений и целевые платформы.

- Этот патч расширяет и улучшает систему обновления, вводя новые типы обновлений (например, для Windows Installer), новые определения типов для архитектуры, платформы, качества и цели, а также изменяя способ формирования URL-адресов обновлений и проверки доступности новых версий. Он также интегрирует библиотеку `semver` для более точного сравнения версий.
- **Изменения:**
    - **`src/vs/platform/update/common/update.ts`**:
        - Добавляет `WindowsInstaller` в перечисление `UpdateType`.
        - Вводит новые определения типов: `Architecture`, `Platform`, `Quality` и `Target`, которые позволяют более детально контролировать и описывать процессы обновления.
    - **`src/vs/platform/update/electron-main/abstractUpdateService.ts`**:
        - Модифицирует функцию `createUpdateURL` для приема параметров `productService`, `quality`, `platform`, `architecture` и опционального `target`. Это позволяет генерировать более гибкие и специфичные URL-адреса для обновлений, поддерживая различные каналы или цели (например, `archive`, `msi`, `system`, `user`).
    - **`src/vs/platform/update/electron-main/updateService.darwin.ts`**:
        - Импортирует `CancellationToken` и `semver`.
        - Перерабатывает функцию `buildUpdateFeedUrl` для использования новой `createUpdateURL` с `process.platform` и `process.arch`.
        - Изменяет логику `checkForUpdates`: теперь она получает метаданные обновления с `this.url` с помощью `requestService` и использует `semver.compareBuild` для сравнения текущей и полученной версий. Обновление запускается только в том случае, если доступна более новая версия.
    - **`src/vs/platform/update/electron-main/updateService.linux.ts`**:
        - Аналогично сервису обновлений для macOS, импортирует `semver`.
        - Перерабатывает `buildUpdateFeedUrl` для использования новой `createUpdateURL`.
        - Модифицирует логику `checkForUpdates`, включая `semver.compareBuild` для сравнения версий.
    - **`src/vs/platform/update/electron-main/updateService.win32.ts`**:
        - Импортирует `semver` и `Target`.
        - Модифицирует `getUpdateType` для различения `UpdateType.Setup` и `UpdateType.WindowsInstaller` на основе наличия `unins000.exe` или `Program Files` в пути.
        - Перерабатывает `buildUpdateFeedUrl` для формирования параметра `target` для `createUpdateURL` на основе `UpdateType` (Archive, WindowsInstaller, user, system).
        - Интегрирует `semver.compareBuild` в логику `checkForUpdates` для Windows, аналогично macOS и Linux.
        - Изменяет логику установки обновлений для использования `msiexec.exe` для `UpdateType.WindowsInstaller`, обеспечивая специфическую обработку MSI-пакетов.
        - Удаляет вызов `telemetryService.publicLog2` для ошибок обновления.

Этот патч является значительным усовершенствованием системы обновлений, делая ее более гибкой, надежной и способной поддерживать различные цели развертывания и типы обновлений, особенно для Windows.

### `welcome-page-russian.patch`

**Назначение:** Этот патч локализует содержимое страницы приветствия и начального руководства Researcherry на русский язык.

- Этот патч переводит ключевые элементы пользовательского интерфейса на странице приветствия и в разделе "Начало работы" на русский язык, улучшая пользовательский опыт для русскоязычных пользователей.
- **Изменения:**
    - **`src/vs/workbench/contrib/welcomeGettingStarted/common/gettingStartedContent.ts`**:
        - **"New File..."**: Заголовок и описание для создания нового файла переведены на русский: "Новый файл..." и "Открыть новый текстовый файл, блокнот или пользовательский редактор.".
        - **"Open..." (Mac)**: Заголовок и описание для открытия файла/папки на macOS переведены на русский: "Открыть..." и "Открыть файл или папку для начала работы".
        - **"Open File..."**: Заголовок и описание для открытия файла переведены на русский: "Открыть файл..." и "Открыть файл для начала работы".
        - **"Get started with Researcherry"**: Заголовок и описание для раздела "Начало работы" переведены на русский: "Начало работы с Researcherry" и "Настройте редактор, изучите основы и начните программировать". Также переведен заголовок страницы руководства: "Настройка Researcherry".
        - **"Choose your theme"**: Заголовок и описание для выбора темы переведены на русский: "Выберите тему оформления" и "Правильная тема помогает сосредоточиться на коде, не напрягает глаза и просто приятнее в использовании. Просмотреть темы оформления".
        - **"Code with extensions"**: Заголовок и описание для раздела расширений переведены на русский: "Программируйте с расширениями" и "Расширения — это усилители возможностей Researcherry. Всё больше из них становятся доступными в веб-версии. Просмотреть популярные веб-расширения".

Этот патч является частью усилий по полной локализации Researcherry, делая его более доступным и удобным для русскоязычной аудитории.

### `add-russian-pack.patch`

**Назначение:** Этот патч пуст и не содержит изменений.

- Этот патч не содержит изменений и, следовательно, не выполняет никаких действий. Возможно, он был создан как заготовка или был предназначен для добавления русского языкового пакета, но его содержимое так и не было заполнено.
- **Изменения:** Отсутствуют.

### `brand.patch`

**Назначение:** Этот патч является центральным для ребрендинга VSCodium в Researcherry. Он систематически заменяет в коде все упоминания "VS Code" и связанные с ним брендовые термины на плейсхолдер `!!APP_NAME!!`, который во время сборки будет заменен на "Researcherry".

- Этот патч обеспечивает единообразное брендирование во всем пользовательском интерфейсе приложения, документации и различных расширениях, гарантируя, что Researcherry выглядит и ощущается как самостоятельный продукт.
- **Изменения:** Патч модифицирует множество файлов в различных расширениях и основных компонентах. Основные изменения включают:
    1.  **Строки пользовательского интерфейса и описания:** Обновление текста, описаний и меток, ориентированных на пользователя, для отражения нового названия приложения. Сюда входят описания настроек, детали автодополнения, сообщения об ошибках и приветственные сообщения.
    2.  **Манифесты расширений (`package.nls.json`, `package.json`):** Изменение отображаемых имен и описаний расширений в соответствии с брендом Researcherry.
    3.  **Комментарии в коде:** Обновление комментариев, которые ссылаются на "VS Code", на `!!APP_NAME!!`.
    4.  **Документация и ссылки:** Изменение внутренних ссылок и ссылок, указывающих на документацию или репозитории VS Code, на эквиваленты Researcherry.

- **Примеры затронутых файлов/областей:**
    *   `extensions/configuration-editing/src/configurationEditingMain.ts`: Обновляет описания для переменных `workspaceFolder` и `workspaceFolderBasename`.
    *   `extensions/css-language-features/package.nls.json`: Изменяет упоминания "VS Code" в описаниях функций языка CSS.
    *   `extensions/git/package.nls.json`: Обновляет текст, связанный с интеграцией Git и контролем версий.
    *   `extensions/html-language-features/client/src/htmlClient.ts`: Модифицирует информационные сообщения, отображаемые пользователю.
    *   `extensions/typescript-language-features/package.nls.json`: Обновляет описания функций и настроек языка TypeScript.
    *   `extensions/media-preview/src/audioPreview.ts`, `imagePreview/index.ts`, `videoPreview.ts`: Изменяет текст в сообщениях об ошибках предварительного просмотра медиафайлов.

Этот патч является обширным и затрагивает практически каждую часть кодовой базы, содержащую пользовательский текст или внутренние ссылки на название приложения. Он имеет решающее значение для создания фирменного стиля Researcherry.

### `binary-name.patch`

**Назначение:** Этот патч изменяет имя исполняемого файла приложения с "code" на имя, указанное в `product.applicationName`.

- В `build/gulpfile.vscode.js` строка `bin/code` заменяется на `bin/' + product.applicationName`. Это гарантирует, что при упаковке приложения бинарный файл будет переименован в соответствии с `applicationName`.
- В `src/vs/platform/native/electron-main/nativeHostMainService.ts` пути к исполняемому файлу также обновляются с `bin/code` на `bin/${this.productService.applicationName}`. Это затрагивает функции, которые создают символические ссылки или определяют местоположение исполняемого файла, обеспечивая их корректную работу с новым именем.

Этот патч является ключевым для завершения ребрендинга, так как он меняет имя основного исполняемого файла, делая его соответствующим бренду Researcherry.

**Назначение:** Этот патч изменяет имя исполняемого файла приложения с "code" на имя, указанное в `product.applicationName`.

- В `build/gulpfile.vscode.js` строка `bin/code` заменяется на `bin/' + product.applicationName`. Это гарантирует, что при упаковке приложения бинарный файл будет переименован в соответствии с `applicationName`.
- В `src/vs/platform/native/electron-main/nativeHostMainService.ts` пути к исполняемому файлу также обновляются с `bin/code` на `bin/${this.productService.applicationName}`. Это затрагивает функции, которые создают символические ссылки или определяют местоположение исполняемого файла, обеспечивая их корректную работу с новым именем.

Этот патч является ключевым для завершения ребрендинга, так как он меняет имя основного исполняемого файла, делая его соответствующим бренду Researcherry.
